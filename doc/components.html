<h2>Components</h2><h3>sfComment: _commentForm.php:</h3><br />To be able to comment on each artwork, a user needs to enter the title, and the comment in a form.<br />This template provides that form. To use it, you must at least send the object and the namespace. See an example below.<br />get_component('sfComment', 'commentForm', array('object' => $object, 'namespace' => $namespace,  'parentId' => $comment['Id']))<br />- $object The article object the comment should be added to<br />- $namespace This is either 'frontend' or 'admin', comments can be added by users, but an artwork can also be discussed by admin users.<br />- $parentId The comments can be nested, in a list, if replying to a thread, the parent Id is needed<br />The controller has the possibility to pass the following information:<br />The following are configuration data from REAKTOR_ROOT/apps/reaktor/config/app.yml (which fields are required, how to get userinfo etc)<br />- $config_user<br />- $config_anonymous<br />Depending on whether the user is logged in or not these are either user or anonymous<br />- $config_used: set to either $config_used or $config_anonymous<br />- $action: which action to run when submitting form (authenticatedComment or anonymousComment)<br /><br /><h3>sfComment: _commentList.php:</h3><br />In Reaktor some objects like f.ex artwork can be commented/discussed. This template lists either all comments<br />within a namespace for an objecttype, or it displays the comments within a namespace for a particular object.<br />To use it:<br />include_component('sfComment', 'commentList', array('object' => $object, 'namespace' => $namespace)<br />The following parameters can be passed when using the component:<br />$object        - Usually artwork or file<br />$namespace     - In Reaktor the two namespaces used are 'frontend' for user comments and 'administration' for discussion<br />$limit         - How many comments should be displayed in the list<br />$order         - Order comments by date (desc/asc)<br />$unsuitable    - Include only comments with the unsuitable flag set to this<br />$adminlist     - Is this an adminlist or not<br />$comment_pager - Which page, if using a pager<br />$overview      - Boolean, if list is an overview, and not possible to add comments to<br />This template can be used in an administration list as a partial:<br />include_partial('sfComment/commentList', array(<br />'comments'      => $comments,<br />'adminlist'     => true,<br />'unsuitable'    => 2,<br />"comment_pager" => $comment_pager))<br />The $comment_pager helps make the the list paginated.<br />The controller passes the following information:<br />$comments - An array of sfComment objects<br /><br /><h3>sfComment: _commentTitleList.php:</h3><br />Component to display latest comments a user has written.<br /><br /><h3>messaging: _sendMessageForm.php:</h3><br />Send message form<br /><br /><h3>messaging: _messagesSummary.php:</h3><br />template for messages<br /><br /><h3>artwork: _lastArtworks.php:</h3><br />One of the important ways of achieving a dynamic site, includes having lists like these<br />which are continously updated. This component template lists a reaktors latest<br />approved artworks. To include this<br />component, see the example below:<br />include_component('artwork','lastArtworks', array(<br />'image'         => 'mini',<br />'limit'         => 6,<br />'subreaktor'    => $subreaktor,<br />'lokalreaktor'  => $lokalreaktor,<br />'random'        => true,<br />'exclude_first' => 1))<br />None of these parameters are required. The default limit is retrieved from configuration,<br />exclude_first will exclude the n latest artworks from the list (say you've displayed the<br />latest artwork as a thumbnail on top of the page, and you want a list of smaller thumbnails<br />on a different part of the page, you don't want the latest artwork to be displayed again, so<br />exclude_first = 1). If $image (thumb|subreaktorthumb|mini) isn't passed then text is<br />used. $subreaktor and $lokalreaktor are only needed if they should display something<br />from a different reaktor than the site belongs to. For instance, on the frontpage of<br />groruddalenreaktor, you might want to show a list of the most popular reaktors in foto:<br />include_component('artwork', 'lastArtworks', array('subreaktor' => 'foto')<br />The information passed from the controller are the following:<br />- $last : If not passed from a lokalreaktor: An array of artwork objects<br />- $last : If passed from a lokalreaktor: An array with:<br />'last' => an array of artworks,<br />'subreaktor' = the subreaktor object for the subreaktor it was passed from<br />The image type "subreaktorthumb" and "subreaktorlist" can only be called from a lokalreaktor<br />frontpage. This is used when this list is called more than once on the same page, to make sure<br />the same image doesn't appear more than once.<br /><br /><h3>artwork: _listPresentation.php:</h3><br />One of the important ways of achieving a dynamic site, includes having lists like these<br />which are continously updated. This component template lists a reaktors latest<br />approved artworks. To include this<br />component, see the example below:<br />include_component('artwork','lastArtworks', array(<br />'image'         => 'mini',<br />'limit'         => 6,<br />'subreaktor'    => $subreaktor,<br />'lokalreaktor'  => $lokalreaktor,<br />'random'        => true,<br />'exclude_first' => 1))<br />None of these parameters are required. The default limit is retrieved from configuration,<br />exclude_first will exclude the n latest artworks from the list (say you've displayed the<br />latest artwork as a thumbnail on top of the page, and you want a list of smaller thumbnails<br />on a different part of the page, you don't want the latest artwork to be displayed again, so<br />exclude_first = 1). If $image (thumb|subreaktorthumb|mini) isn't passed then text is<br />used(??). $subreaktor and $lokalreaktor are only needed if they should display something<br />from a different reaktor than the site belongs to. For instance, on the frontpage of<br />groruddalenreaktor, you might want to show a list of the most popular reaktors in foto:<br />include_component('artwork', 'lastArtworks', array('subreaktor' => 'foto')<br />The information passed from the controller are the following:<br />- $artworks : If not passed from a lokalreaktor: An array of artwork objects<br />- $artworks : If passed from a lokalreaktor: An array with:<br />'last' => an array of artworks,<br />'subreaktor' = the subreaktor object for the subreaktor it was passed from<br />The image type "subreaktorthumb" and "subreaktorlist" can only be called from a lokalreaktor<br />frontpage. This is used when this list is called more than once on the same page, to make sure<br />the same image doesn't appear more than once.<br /><br /><h3>artwork: _latestCommented.php:</h3><br />In order for any user of the Reaktor site to be able to easily browse interesting artworks, preferrably with active content,<br />dynamic lists are provided. This template displays a list of links to artworks which last received comments. It's actually<br />a container, it calles another template with the correct paramters to print the list. To use this template:<br />include_component("artwork","latestCommented");<br />It isn't mandatory, but the following parameters can be passed when including the component:<br />$lokalreaktor: Limit the list to only use comments given to articles in this lokalreaktor<br />$subreaktor  : Limit the list to only use comments given to articles in this subreaktor<br />The controller passes the following information:<br />$latest_commented : An array of comments<br /><br /><h3>artwork: _lastArtworksFromUser.php:</h3><br />Component template to print image links of a users latest approved artworks. Used in portfolio and mypage.<br />Example of use:<br />include_component('artwork','lastArtworksFromUser',array(<br />'id' => $userid,<br />'portfolio' => true,<br />'user' => $user,<br />'orderBy' => $orderBy,<br />))<br />Component can pass:<br />$id        : The id of the user who owns the portfolio page<br />$user      : sfGuardUser object, (used to set title of page)<br />$portfolio : If set then this template is used in portfolio<br />$mypage    : If set then this template is used in mypage<br />$orderby   : What to order/filter by (title, date, rating or format)<br /><br /><h3>artwork: _listUsersPopularArtworks.php:</h3><br />Component template to print a users most popular (approved) artworks<br /><br /><h3>artwork: _listReaktorsLatestArtworks.php:</h3><br />Component template to print a reaktors most popular (approved) artworks<br /><br /><h3>artwork: _listReaktorsPopularArtworks.php:</h3><br />One of the important ways of achieving a dynamic site, includes having lists like these<br />which are continously updated. This component template list a reaktors most popular<br />approved artworks. They can be displayed both in text and image format. To include this<br />component, see the example below:<br />include_component('artwork','listReaktorsPopularArtworks', array(<br />'image'      =>   'thumb',<br />'limit'      =>   1,<br />'subreaktor' =>   $subreaktor,<br />'lokalreaktor' => $lokalreaktor))<br />None of these parameters are needed. The default limit is retrived from configuration,<br />if $image isn't passed then text is used. $subreaktor and lokal reaktor are only needed if they should display something<br />from a different reaktor than the site belongs to. For instance, on the frontpage of groruddalenreaktor, you might want to show<br />a list of the most popular reaktors in foto:<br />include_component('artwork', 'listReaktorsPopularArtworks', array('subreaktor' => 'foto')<br />The information passed from the controller are the following:<br />- $artworks : An array of artwork objects<br /><br /><h3>artwork: _seeAlso.php:</h3><br />The related artwork list to be displayed on the show artwork page<br />Also known as "see also". Example of use:<br />include_component('artwork', 'seeAlso', array(<br />'artwork'     => $artwork,<br />'update'      => 'relate_artwork_tag',<br />'editmode'    => $editmode,<br />'usercanedit' => $usercanedit));<br />$artwork:     genericArtwork object, the artwork currently viewed<br />$update:      the div that should be updated<br />$editmode:    the artwork view mode (show|edit)<br />$usercanedit: the user has proper credentials? (true|false)<br />The controller passes the following information:<br />$relatedArtworks: array of genericArtwork objects<br />$otherpeoplelike: array of genericArtwork objects<br />otherArtworks:    array of genericArtwork objects<br /><br /><h3>artwork: _linkRelated.php:</h3><br />Partial for linking related artwork<br /><br /><h3>artwork: _recommended.php:</h3><br />The staff of Reaktor can recommend an artwork in a Subreaktor, or in a Subreaktor within a Lokalreaktor.<br />This template displays the current recommended artwork depending on the template where this component is<br />used, typically the homepage, or a subreaktor frontpage. To include it in a template:<br />include_component("artwork","recommended");<br />This component is 'smart', when it is included in the filmreaktor template (filmReaktorSuccess.php) it will<br />display the latest recommended film artwork. This default behavior is possible to override by passing an instance<br />of a suberaktor, or an ignore as the subreaktor and/or lokalreaktor parameter. The following example  will always<br />display the latest recommended photo artwork in the entire reaktor, regardless of the template it's included in:<br />include_component("artwork", "recommended", array('lokalreaktor' => 'ignore', 'subreaktor' => Subreaktor::getByReference('foto'));<br />To display only the latest recommended photo artwork in groruddalen, use the above code, but leave out the lokalreaktor parameter.<br />To get an instance of a reaktor you use the following piece of code: Subreaktor::getByReference('foto'), where foto is the name<br />of the subreaktor. Other alteratives to foto are: tegning, film, lyd, tegneserier and tekst. To get an instance<br />of a lokalreaktor the same piece of code is used, but the name of the lokalreaktor is used instead (groruddalen etc.).<br />The component's controller passes the following information:<br />$artwork - An artwork object<br /><br /><h3>artwork: _categorySelect.php:</h3><br />Component for "main" category selection, as well as Subreaktor selection.<br />This component is used on the artwork edit page, displays a list of Subreaktors, and<br />allows you to check/uncheck which subreaktor you want your artwork to be in. It also<br />includes the categoryList component, which lets you select categories for the artwork.<br />This component can be called with<br />include_component("artwork", "categorySelect", array(<br />"artwork" => $artwork));<br />Where $artwork is the artwork you want to edit.<br /><br /><h3>artwork: _categoryList.php:</h3><br />Component for "main" category selection<br />This component is used on the artwork edit page, and shows you a list of available categories,<br />which you can click to select. Selected categories are marked with green, bold text.<br />If you are not allowed to edit the information, the artworks categories are just listed.<br />Include the component like this:<br />include_component("artwork", "categoryList", array(<br />"artwork" => $artwork));<br />Takes an $artwork as a parameter, and that's all it needs.<br /><br /><h3>artwork: _recommendArtwork.php:</h3><br />The staff of Reaktor can recommend an artwork in a Subreaktor, or in a Subreaktor within a Lokalreaktor. This<br />template displays which Subreaktors the artwork can be recommended in, and which Subreaktors it's the latest<br />recommended in. To use it:<br />include_component('artwork', 'recommendArtwork' , array('artwork' => $artwork))<br />Parameters passed:<br />$artwork - Object of an artwork<br />From the controller the following information is passed:<br />$recommendations - Array of recommendation objects<br />$subreaktor_array - An array of the subreaktors the artwork can be recommended in<br /><br /><h3>artwork: _embedLink.php:</h3><br />embed link for artwork page<br /><br /><h3>artwork: _userArtworkListElement.php:</h3><br />Display a wide format single artwork row, for use in generic lists or info areas where artwork summary is required<br />This view is useful for normal users - admin users should use displayArtworkInList.php as this contains information<br />more suited to administration purposes.<br />Variables this partial requires:<br />- $artwork  : The artwork object to show<br />- $thisUser : The current user object (if we are here as an admin user)<br /><br /><h3>admin: _adminArtworkList.php:</h3><br />Artworks and files are on Reaktor sometimes presented in lists. The reaktor backend has most of these lists:<br />rejected, approved, unapproved, under discussion etc. To keep a more or less similar look on all<br />lists, a single template is used, this one.<br />Ex.: include_partial('admin/adminArtworkList', array('files' => $files))<br />Ex.: include_component('admin', 'adminArtworkList', array('artworks' => $artworks, 'show_recommended' => true))<br />This template gets all of its information from the parameters passed<br />- $files            : An array of files<br />- $artworks         : Array of artworks<br />- $show_recommended : If this is passed, the subreaktors this file is recommended are displayed<br /><br /><h3>admin: _adminSummary.php:</h3><br />This component displays summary information for logged in admin users, it is currently displayed in<br />the sidebar when an admin user is logged in.<br />Variables passed from the component action<br />- $editorialteams : An array of editorial teams (as objects) that this user belongs to<br /><br /><h3>reports: _resultGraph.php:</h3><br />Graphs for reports<br />Requires parameters: $graphData, $dateData<br /><br /><h3>reports: _savedReportsFloatBox.php:</h3><br />Used on report pages - shows a list of popular saved/bookmarked reports<br />Required parameter - report type ($type = 'artwork' or 'user') which corresponds to the type of report<br />as stored when saving a report bookmark.<br />The reports displayed by this partial have two links - one will show the report as a count, the other as a list<br />The component class will send back an array of bookmark objects which can be iterated below<br />The variable $savedReport will be false if the current report is unsaved, or will contain the report object<br /><br /><h3>subreaktors: _categoriesList.php:</h3><br />A template to display a list of categories that are connected to a given subReaktor. Example of use:<br />get_component('subreaktors', 'categoriesList', array('subreaktor' => $this->subreaktor))<br />The controller does not pass any information.<br /><br /><h3>subreaktors: _listSubcategories.php:</h3><br />List subreaktor categories and number of artworks in each<br /><br /><h3>subreaktors: _listLokalReaktorSubcategories.php:</h3><br />List subreaktor categories and number of artworks in each<br /><br /><h3>subreaktors: _newCategoryField.php:</h3><br />When new Reaktors are created, subReaktors in particular, they should have a set of categories<br />connected to them. This template provides a category dropdown, it should show currently unnasigned<br />categories, but also a link for adding new categories. Example of use:<br />include_component("subreaktors", "newCategoryField")<br />The controller passes the following information:<br />$categories<br /><br /><h3>profile: _lastUsers.php:</h3><br />Component template that prints the 5 last registered users<br />Query is created and executed from profileComponents class,<br />function executeLastUsers()<br /><br /><h3>profile: _resources.php:</h3><br />A user can add and remove resources - links to other web sites they think are useful. This<br />template consist of a list of resources, a form to add it, and links to remove as well.<br />Example of usage:<br />include_component('profile','resources' ,array('user' => $user->getId()))<br />The paramters needed:<br />$user - the id of the user<br />The controller passes the following information:<br />$resources - The already added resources belonging to this user<br /><br /><h3>profile: _matchingInterests.php:</h3><br />User's can browse other user's content by viewing user's with the same interests on themselves.<br />This component template prints the 5 last registered users with the same interests as a given user.<br />Example of use:<br />include_component('profile', 'matchingInterests', array(<br />'user_id'  => $user->getId(),<br />'username' => $user->getUsername(),<br />'all'      => false,<br />))<br />$user_id : Integer Match interest with this user<br />$username: String Name of the same user<br />$all     : Boolean If false use config to decide length of list<br />The controller passes the following information:<br />$users - array of sfGuardUser objects<br /><br /><h3>profile: _portfolioUserinfo.php:</h3><br />Display user information in sidebar on portfoliopage<br /><br /><h3>sidebar: _sidebar.php:</h3><br />The layout of the reaktor page includes a footer, a header, the main content and a sidebar. The sidebar<br />is the right hand bar on every page which has login and user information, links, the messages box etc.<br />This is the template for the sidebar, and its component is called only once, and that's from layout.php:<br />include_component('sidebar', 'sidebar')<br />Since its included in the layout, it is displayed on every single reaktor page, and the content of it will<br />change according to which page is loaded, if the user is logged in, and if he/she has administration<br />credentials.<br />The caller of the sidebar component do not have to pass any parameters.<br />The controller passes the following information:<br />- $artwork_count : The number of approved artworks on the reaktor site<br />- $articles      : The articles that should be listed in the sidebar, this is changes according to the page<br /><br /><h3>sidebar: _sidebarArticles.php:</h3><br />Sidebar articles are displayed using component slots. Unless a module has set the sidebararticles slot in its config/view.yml<br />file to point to a component it will display this template.<br /><br /><h3>favourite: _listFavourites.php:</h3><br />template for listing favourites<br /><br /><h3>favourite: _favouriteActions.php:</h3><br />favourite action links<br /><br /><h3>favourite: _artworkListFavourites.php:</h3><br />template for listing favourites<br /><br /><h3>sfTransUnit: _langLinks.php:</h3><br />Language links for top right of header<br /><br /><h3>sfTransUnit: _newTranslationForm.php:</h3><br />Form for adding a new database item to translate, based on passed object name<br />See admin/newCategorySuccess for example useage<br />Must pass translateObject and translateField<br />Preferable to pass redirect value also to send user somewhere sensible after success<br /><br /><h3>articles: _articleRelations.php:</h3><br />The reaktor site's main functionality is uploading artworks, but also providing useful articles for<br />the regular users and staff. These articles can sometimes cover the same topic, and this template<br />provide a way of relating articles to each other and displays a list of articles that have been<br />related to each other<br />To use the component:<br />include_component('articles', 'articleRelations', array('article' => $article));<br />The component needs to pass the following:<br />$article- An article object<br />The controller passes the following<br />$related_articles - an array of article objects<br /><br /><h3>articles: _expirationDate.php:</h3><br />Expiry date partial. Included in article edit page to show and edit theme article expiry date<br /><br /><h3>articles: _articleCalendar.php:</h3><br />Article calendar left-hand sidebar<br />Included in article edit page and on article list page<br /><br /><h3>articles: _listCreators.php:</h3><br />Component for dispaying the creator and last modifier of an article<br />Expects:<br />- $article : The article object<br />Available to the template:<br />- $created_by : The username of the creator<br />- $created_at : The time of the last update (mysql datetime)<br />- $updated_by : The username of the user who last modified the article<br />- $updated_at : The time of the last update (mysql datetime)<br /><br /><h3>articles: _myPageArticles.php:</h3><br />Shows the my page articles<br /><br /><h3>articles: _frontPageArticles.php:</h3><br />Front page article partial. Can be included on any frontpage, and will show general articles<br />not restricted to a subreaktor, and articles that are available only in the subreaktor you're<br />watching.<br />Does not take any parameters.<br /><br />
Warning: fopen(/opt/reaktor/apps/reaktor/modules/articles/templates/_articleBanner.php): failed to open stream: No such file or directory in /opt/reaktor/doc/scripts/components_and_partials.php on line 34
<h3>adminmessage: _nextMessageDueToExpire.php:</h3><br />Component to display the next system admin message to expire.<br />Should be used for delivering important messages for the user,<br />i.e when the system is about to be taken down.<br /><br /><h3>tags: _tagEditList.php:</h3><br />Tag edit list component, used to display a list of tags with editing features appropriate to user priveledges.<br />It is used when adding/removing tags from objects (files, artworks etc) but also when editing tags in general<br />(for example as an administrator approving tags). For this reason there are a few combinations of parameters which can be sent<br />to this component, with differing results.<br />- $tagObject      : The object that has been tagged - actions carried out on this page will reflect on this object (artwork/article etc)<br />- $tags           : The tag objects that we are listing - they could have come from the object (above) or from a generic list<br />- $unapproved     : Used by the component. Set true to return only unapproved tags in the response.<br />- $taglength_error: Returned by the ajax action - set if we need to display a message to the user.<br />- $page           : Returned by the ajax action - the current page we are viewing (possibly redundant now)<br />- $options        : An array of options to send to the component, the following are available:<br />- $noicons        : Whether to show icons next to tags (effectively turns the list into a red/green list)<br />- 	rowLimit       : If set will insert a <br /> tag every time this limit is reached when listing tags<br />-  artworkList    : Tells the component that this is an artwork list, overrides the use of extra file id<br />-  nomargin       : If set removes the left margin from the ul element<br />-  extraId        : File id or artwork id that will be appended<br />-  tageditor      : True or false, includes a tag editor partial to handle normalisation - should only be used on vertical lists<br />-  completeFuncs  : Javascript functions to be called when ajax requests have completed, seperate with semi-colon.<br />-  commas         : Show commas next to tags in list view<br />This template may be rendered by a calling (parent) template or an ajax call.<br /><br /><h3>tags: _tagSearchBox.php:</h3><br />This partial contains the search box which can be found in the sidebar, also covering user searches<br />No parameters are required, simply include this partial and you will have a working search box<br /><br /><h3>tags: _showintellitags.php:</h3><br />Component for showing intelligent tags that are related in some way to a tagged object<br />- $tags : The tags with which to base the relations (for example a set of tags from an artwork)<br />The above variable is used by the component action to generate related tags and display a tag cloud.<br /><br /><h3>tags: _viewTagsWithStatus.php:</h3><br />Print a comma seperated list of tags with colouring to show status<br />Required parameters are detailed below:<br />- $artwork : The artwork object that we need to list the tags for<br />Variables passed back from the component<br />- $tagStatusArray : The array of tags with inside status arrays (1 is approved, 0 is not)<br /><br /><h3>upload: _tinymce.php:</h3><br />TinyMCE plugin for creating a text artwork online<br />This template is included on the upload/edit page when creating or editing a text artwork - all TinyMCE options<br />for this process are configured here in the javascript block below.<br />- $mce_data : The contents of the text field, if set it will be prefilled - if not an empty textarea will be loaded<br /><br /><h3>feed: _foreignReader.php:</h3><br />Component to parse and display a feed from a foreign website (could of course also parse reaktor<br />feeds ;) ) Displays header + short section of the ingress + "read more".<br />Needs the following parameters:<br />'feedurl' - The url of the foreign feed. Must be a valid Atom/RSS feed<br />Optional parameters:<br />'title'         - If you want to display a title above the items<br />'items'         - If you want to display more than/fewer than 5 news items<br />'ingresslength' - If you want to display a longer/shorter ingress<br />'showreadmore'  - If you don't want to display the 'Read more'-link, set this to false<br />'headerlink'    - If you want to make the item headers into links, set this to true<br /><br /><h3>userContent: _artworkCompositeSelect.php:</h3><br />Select dropdown for picking a composite artwork to add this file to<br />Will show a list of artworks of the same type<br />- $artworks : The eligible artworks for this addition<br />- $thisUser : The user object that we are working with<br /><br /><h3>userContent: _contentManagerSidebarAjaxblock.php:</h3><br />This needs to be outside the containing <div> so it can be updated via an ajax call<br /><br />